[platformio]
extra_configs =
    factory_settings.ini
    features.ini
default_envs = esp32doit-devkit-v1
[env]
build_flags =
    -DASYNCWEBSERVER_REGEX
    -L/libs
    -L/effects
    ${factory_settings.build_flags}
    ${features.build_flags}
    -D NO_GLOBAL_ARDUINOOTA
; Uncomment ENABLE_CORS to enable Cross-Origin Resource Sharing (required for local React development)
    -D ENABLE_CORS
    -D CORS_ORIGIN=\"http://localhost:3000\"
; Uncomment PROGMEM_WWW to enable the storage of the WWW data in PROGMEM
    -D PROGMEM_WWW

; ensure transitive dependencies are included for correct platforms only
lib_compat_mode = strict

; Uncomment & modify the lines below in order to configure OTA updates
;upload_flags =
;  --port=8266
;  --auth=esp-react
;upload_port = 192.168.0.11
;upload_protocol = espota

framework = arduino
monitor_speed = 115200

extra_scripts =
    ;pre:scripts/build_interface.py

lib_ldf_mode = deep
lib_deps =
    ArduinoJson@>=6.0.0,<7.0.0
    ESP Async WebServer@>=1.2.0,<2.0.0
    AsyncMqttClient@>=0.8.2,<1.0.0
    fastled/FastLED @ ^3.4.0
    adafruit/Adafruit Unified Sensor @ ^1.1.4
    adafruit/DHT sensor library @ ^1.4.2
    SPIFFS

[env:esp32doit-devkit-v1]
; Comment out min_spiffs.csv setting if disabling PROGMEM_WWW with ESP32
board_build.partitions = min_spiffs.csv
upload_speed = 921600
platform = espressif32
board = esp32doit-devkit-v1
framework = arduino